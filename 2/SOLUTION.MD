Ход решения:
* запустил в директории со дним файлом - скрипт отработал;
* запустил в директории с 7k+ файлов - скрипт завис. Проблема подтвердилась;
* открыл исходный код - обфусцирован;
* перед тем, как заниматься приведением кода к более-менее нормальному виду, решил пройти профайлером;
* запустил скрипт с профайлером xdebug, немного подождал, открыл отчет. Основное время на функцию sleep вызываемую в list_files_in_folder_callback->callback;
* открыл исходник, ctrl+f, удалил sleep;
* запустил скрипт снова - отрабатывает фактически моментально. Рамках данных условий задачи, считаю задачу выполненной, дальнейший анализ нецелесообразным;

Время решения - 5 минут.